{
    "name": "CTRI Custom Call Log",
    "namespace": "UWMadison\\CustomCallLog",
    "description": "A configurable, searchable, call list dashboard for Reminders, Follow ups, Missed Vists and more.",
    "authors": [
        {
            "name": "Adam nunez",
            "email": "adam.Nunez@ctri.wisc.edu",
            "institution": "UW Madison - Center for Tobacco Research and Intervention"
        }
    ],
    "compatibility": {
        "redcap-version-min": "10.0.0"
    },
    "permissions": [
        "redcap_data_entry_form",
        "redcap_every_page_top",
        "redcap_save_record"
    ],
    "links": {
        "project": [
            {
                "name": "Call List",
                "icon": "fas fa-phone",
                "url": "index.php",
                "show-header-and-footer": true
            },
            {
                "name": "Load New Entry Calls",
                "icon": "gear",
                "url": "newEntryLoad.php?NOAUTH"
            },
            {
                "name": "Load Reminder Calls",
                "icon": "gear",
                "url": "scheduleLoad.php?NOAUTH"
            },
            {
                "name": "Resolve Ad-hoc Calls",
                "icon": "gear",
                "url": "adhocResolve.php?NOAUTH"
            },
            {
                "name": "Create Ad-hoc Call",
                "icon": "gear",
                "url": "newAdhoc.php?NOAUTH"
            }
        ]
    },
    "no-auth-pages": [
        "newEntryLoad",
        "scheduleLoad",
        "adhocResolve",
        "newAdhoc"
    ],
    "framework-version": 5,
    "project-settings": [
        {
            "key": "call_summary",
            "name": "<b>Include call summary on</b>",
            "repeatable": true,
            "type": "form-list"
        },
        {
            "key": "dd_text",
            "name": "Settings such as 'call scripts' (for reminder calls) and 'tasks remaining' much be edited directly in the data dictionary. Further customization of the call log should be kept minimal with mostly additions. Reporting disconnected phone numbers can be hidden if not used, as can call backs, and remaining tasks.",
            "type": "descriptive"
        },
        {
            "key": "call_log_event",
            "name": "<b>Call Log Instrument's Event</b><br>There should be only one",
            "required": true,
            "type": "event-list"
        },
        {
            "key": "metadata_event",
            "name": "<b>Metadata Instrument's Event</b>",
            "required": true,
            "type": "event-list"
        },
        {
            "key": "withdraw_event",
            "name": "<b>Withdraw Condition</b>",
            "type": "event-list"
        },
        {
            "key": "withdraw_var",
            "name": "<b>Withdraw Field</b>",
            "type": "field-list"
        },
        {
            "key": "withdraw_tmp_event",
            "name": "<b>Temporary Withdraw Date</b>",
            "type": "event-list"
        },
        {
            "key": "withdraw_tmp_var",
            "name": "<b>Withdraw Field</b>",
            "type": "field-list"
        },
        {
            "key": "bad_phone_collection",
            "name": "<b>Bad Phone Reporting</b>",
            "type": "sub_settings",
            "sub_settings": [
                {
                    "key": "bad_phone_event",
                    "name": "<b>Event</b>",
                    "type": "event-list"
                },
                {
                    "key": "bad_phone_flag",
                    "name": "<b>Flag</b><br>Text field set when their is an issue. Hidden.",
                    "type": "field-list"
                },
                {
                    "key": "bad_phone_notes",
                    "name": "<b>Notes</b><br>Textarea with call notes copied into it",
                    "type": "field-list"
                },
                {
                    "key": "bad_phone_resolved",
                    "name": "<b>Resolved</b><br>Checkbox ticked by used when issue is resolved",
                    "type": "field-list"
                }
            ]
        },
        {
            "key": "call_collection",
            "name": "<b>Unique Call Type</b>",
            "type": "sub_settings",
            "repeatable": true,
            "sub_settings": [
                {
                    "key": "call_id",
                    "name": "<b>Unique ID</b><br>Short with no spaces, used in metadata and backend",
                    "required": true,
                    "type": "textbox"
                },
                {
                    "key": "call_name",
                    "name": "<b>Call Name</b><br>Used for display to user",
                    "required": true,
                    "type": "textbox"
                },
                {
                    "key": "max_voice_mails",
                    "name": "<b>Maximum Messages to Leave</b><br>Leave blank if no max",
                    "type": "textbox"
                },
                {
                    "key": "max_voice_mails_per_week",
                    "name": "<b>Maximum Messages per Week</b><br>Leave blank if no max",
                    "type": "textbox"
                },
                {
                    "key": "hide_after_attempts",
                    "name": "<b>Hide after N attempts</b><br>Remove from call list for remainder of day",
                    "type": "textbox"
                },
                {
                    "key": "call_template",
                    "name": "<b>Template</b>",
                    "type": "radio",
                    "choices": [
                        {
                            "value": "new",
                            "name" : "New Entry"
                        },
                        {
                            "value": "reminder",
                            "name": "Reminder"
                        },
                        {
                            "value": "followup",
                            "name": "Follow Up"
                        },
                        {
                            "value": "mcv",
                            "name": "Missed / Cancelled Visit"
                        },
                        {
                            "value": "nts",
                            "name": "Need to Schedule Visit"
                        },
                        {
                            "value": "adhoc",
                            "name": "Ad-hoc"
                        },
                        {
                            "value": "visit",
                            "name": "Schedualed Phone Visit"
                        }
                    ]
                },
                {
                    "key": "new_settings",
                    "name": "<b>New Entry Settings</b>",
                    "type": "sub_settings",
                    "sub_settings": [
                        {
                            "key": "new_text",
                            "name": "New Entry calls are added when a record is created. No settings are currently available. If loading records from an outside source you'll need to configure your import scripts to POST to the newEntryLoad URL.",
                            "type": "descriptive"
                        }
                    ]
                },
                {
                    "key": "reminder_settings",
                    "name": "<b>Reminder Settings</b>",
                    "type": "sub_settings",
                    "sub_settings": [
                        {
                            "key": "reminder_text",
                            "name": "You will want to configure a custom DET to POST to the scheduleLoad URL to add new reminders to the call list immediately. Reminders are placed on the call log some number of days before the reminder date and are removed ON THE REMINDER DATE. Calls removed in this manner are not marked as completed.",
                            "type": "descriptive"
                        },
                        {
                            "key": "reminder_variable",
                            "name": "<b>Reminder Date</b><br>Date of appointment the reminder is for",
                            "type": "field-list"
                        },
                        {
                            "key": "reminder_days",
                            "name": "<b>Days before</b><br>Work day lead time to add to call list.<br>If zero then the call will not be removed from the call list until completed.",
                            "type": "textbox"
                        },
                        {
                            "key": "reminder_include_events",
                            "name": "<b>Reminders For Event(s)</b><br>Comma seperated list of unique event names",
                            "type": "textbox"
                        },
                        {
                            "key": "reminder_remove_event",
                            "name": "<b>Alt Record Remove (event)</b><br>Skip the whole record if value is truthy. Used for Text and Email reminder consent",
                            "type": "event-list"
                        },
                        {
                            "key": "reminder_remove_var",
                            "name": "<b>Alt Record Remove (field)</b>",
                            "type": "field-list"
                        }
                    ]
                },
                {
                    "key": "followup_settings",
                    "name": "<b>Followup Settings</b>",
                    "type": "sub_settings",
                    "sub_settings": [
                        {
                            "key": "followup_text",
                            "name": "Any tab with a follow up call in it will show the Lower and Upper windows of the call as the last two columns.",
                            "type": "descriptive"
                        },
                        {
                            "key": "followup_event",
                            "name": "<b>Follow Up Anchor</b>",
                            "type": "event-list"
                        },
                        {
                            "key": "followup_date",
                            "name": "<b>Follow Up Anchor</b>",
                            "type": "field-list"
                        },
                        {
                            "key": "followup_include_events",
                            "name": "<b>Follow up For Events</b><br>If no event is specified above then list which events should be used here. Comma seperated list of unique event names",
                            "type": "textbox"
                        },
                        {
                            "key": "followup_days",
                            "name": "<b>Days After</b><br>Days after the above date to show the follow up call",
                            "type": "textbox"
                        },
                        {
                            "key": "followup_length",
                            "name": "<b>Window Size</b><br>Number of days the call has to be completed",
                            "type": "textbox"
                        }
                    ]
                },
                {
                    "key": "mcv_settings",
                    "name": "<b>Missed/Cancelled Visit Settings</b>",
                    "type": "sub_settings",
                    "sub_settings": [
                        {
                            "key": "mcv_text",
                            "name": "You will want to configure a custom DET to POST to the scheduleLoad URL to add new reminders to the call list immediately. Any tab with a Missed/Cancelled visit call will have theMissed Appt Date/Time added as the last column. The missed event can be displayed with 'call_event_name'",
                            "type": "descriptive"
                        },
                        {
                            "key": "mcv_indicator",
                            "name": "<b>Indicator</b><br>Any truthy value indicates that the visit was missed or cancelled. Should be set false when the appt is rescheduled.",
                            "type": "field-list"
                        },
                        {
                            "key": "mcv_date",
                            "name": "<b>Schedualed Date</b><br>Date of missed/canceld appointment",
                            "type": "field-list"
                        },
                        {
                            "key": "mcv_include_events",
                            "name": "<b>Missed/Cancelled calls for:</b><br>Comma seperated list of unique event names",
                            "type": "textbox"
                        }
                    ]
                },
                {
                    "key": "nts_settings",
                    "name": "<b>Need to Schedule Visit Settings</b>",
                    "type": "sub_settings",
                    "sub_settings": [
                        {
                            "key": "nts_text",
                            "name": "Need to Schedule calls are generated for an event when the previous event is has a truthy indicator, but the current event has no schedulaed date.",
                            "type": "descriptive"
                        },
                        {
                            "key": "nts_indicator",
                            "name": "<b>Visit Complete Indicator</b><br>Any truthy value indicates that the visit was completed",
                            "type": "field-list"
                        },
                        {
                            "key": "nts_date",
                            "name": "<b>Schedualed Date</b><br>Date of appointments",
                            "type": "field-list"
                        },
                        {
                            "key": "nts_include_events",
                            "name": "<b>Need to Schedule for:</b><br>Comma seperated list of unique event names",
                            "type": "textbox"
                        }
                    ]
                },
                {
                    "key": "adhoc_settings",
                    "name": "<b>Ah-hoc Settings</b>",
                    "type": "sub_settings",
                    "sub_settings": [
                        {
                            "key": "adhoc_text",
                            "name": "Ad-hoc calls are added by an end user on the call log screen. Any tab with an adhoc call in it will show the Reason and Preferred call back date as the last two columns.",
                            "type": "descriptive"
                        },
                        {
                            "key": "adhoc_reason",
                            "name": "<b>Reason for call</b><br>Format as a redcap coded value list",
                            "type": "textarea"
                        }
                    ]
                },
                {
                    "key": "visit_settings",
                    "name": "<b>Schedualed Phone Visit Settings</b>",
                    "type": "sub_settings",
                    "sub_settings": [
                        {
                            "key": "visit_text",
                            "name": "Schedualed Phone Visits are for phone-based encounters that just need a way to record a call log at checkout time. They are not typically used on the call log. ",
                            "type": "descriptive"
                        },
                        {
                            "key": "visit_indicator",
                            "name": "<b>Visit Started Indicator</b><br>Any truthy value indicates that the visit was started",
                            "type": "field-list"
                        },
                        {
                            "key": "visit_include_events",
                            "name": "<b>Schedualed Phone Visits for:</b><br>Comma seperated list of unique event names",
                            "type": "textbox"
                        }
                    ]
                }
            ]
        },
        {
            "key": "call_tab",
            "name": "<b>Unique Call Tab</b>",
            "type": "sub_settings",
            "repeatable": true,
            "sub_settings": [
                {
                    "key": "tab_name",
                    "name": "<b>Tab name</b>",
                    "type": "textbox"
                },
                {
                    "key": "tab_calls_included",
                    "name": "<b>Calls to include</b><br>Comma sperated list of unique call IDs",
                    "type": "textbox"
                },
                {
                    "key": "tab_includes_followup",
                    "name": "<b>Flag set</b><br>Hidden via JS",
                    "type": "textbox"
                },
                {
                    "key": "tab_includes_mcv",
                    "name": "<b>Flag set</b><br>Hidden via JS",
                    "type": "textbox"
                },
                {
                    "key": "tab_includes_adhoc",
                    "name": "<b>Flag set</b><br>Hidden via JS",
                    "type": "textbox"
                },
                {
                    "key": "tab_headers",
                    "name": "<b>Element</b>",
                    "type": "sub_settings",
                    "repeatable": true,
                    "sub_settings": [
                        {
                            "key": "tab_field",
                            "name": "<b>Field</b>",
                            "type": "field-list"
                        },
                        {
                            "key": "tab_field_name",
                            "name": "<b>Field Name</b><br>Defaults to field label",
                            "type": "textbox"
                        },
                        {
                            "key": "tab_field_default",
                            "name": "<b>Default</b><br>Ignores all formatting rules",
                            "type": "textbox"
                        },
                        {
                            "key": "tab_field_expanded",
                            "name": "<b>Expanded Info</b><br>Display the feild in the expanded info",
                            "type": "checkbox"
                        },
                        {
                            "key": "tab_field_link",
                            "name": "<b>Link</b><br>Linking to an instrument isn't possbile on New Entry calls",
                            "type": "radio",
                            "choices": [
                                {
                                    "value": "none",
                                    "name" : "None"
                                },
                                {
                                    "value": "home",
                                    "name" : "Record Home Page"
                                },
                                {
                                    "value": "call",
                                    "name": "New Call Log"
                                },
                                {
                                    "value": "instrument",
                                    "name": "Instrument"
                                }
                            ]
                        },
                        {
                            "key": "tab_field_link_event",
                            "name": "<b>Linked Instrument</b>",
                            "type": "event-list"
                        },
                        {
                            "key": "tab_field_link_instrument",
                            "name": "<b>Linked Instrument</b>",
                            "type": "form-list"
                        }
                    ]
                }
            ]
        }
    ]
}
